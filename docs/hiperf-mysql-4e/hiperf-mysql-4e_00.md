# 前言

由 Oracle 维护的官方文档为您提供了安装、配置和与 MySQL 交互所需的知识。本书作为该文档的伴侣，帮助您了解如何最好地利用 MySQL 作为强大的数据平台来满足您的用例需求。

本版还扩展了合规性和安全性在操作数据库足迹中的日益重要作用。隐私法律和数据主权等新现实已经改变了公司产品构建的方式，这自然地引入了技术架构如何演变的新复杂性。

# 本书适合对象

本书首先面向希望提升在运行 MySQL 方面的专业知识的工程师。本版假设读者熟悉为什么要使用关系数据库管理系统（RDBMS）的基本原则。我们还假设读者具有一些一般系统管理、网络和操作系统的经验。

我们将为您提供在现代架构和更为更新的工具和实践下运行 MySQL 的经验丰富的策略。

最终，我们希望您从本书中对 MySQL 内部和扩展策略的知识中获益，帮助您在组织中扩展数据存储层。我们希望您新获得的见解将帮助您学习和实践一种系统化的方法来设计、维护和故障排除基于 MySQL 构建的架构。

# 这个版本有何不同

*高性能 MySQL*已经成为数据库工程社区多年的一部分，之前的版本分别在 2004 年、2008 年和 2012 年发布。在这些先前的版本中，目标始终是通过专注于深度内部设计，解释各种调整设置的含义，并为用户提供改变这些设置的知识，教导开发人员和管理员如何优化 MySQL 以获得最佳性能。本版保持了相同的目标，但侧重点不同。

自第三版以来，MySQL 生态系统发生了许多变化。发布了三个新的主要版本。工具景观大大扩展，超越了 Perl 和 Bash 脚本，进入了完整的工具解决方案。全新的开源项目已经建立，改变了组织如何管理扩展 MySQL 的方式。

甚至传统的数据库管理员（DBA）角色也发生了变化。行业中有一个老笑话说 DBA 代表“别烦问”。DBA 因为数据库没有像周围的软件开发生命周期（SDLC）一样快速发展而被认为是软件开发生命周期中的绊脚石，这并不是因为他们有什么脾气暴躁的态度，而只是因为数据库的发展速度没有跟上周围 SDLC 的步伐。

像 Laine Campbell 和 Charity Majors（O'Reilly）合著的[*数据库可靠性工程：设计和运营弹性数据库系统*](https://oreil.ly/IJkxU)这样的书籍，已经成为技术组织将数据库工程师视为业务增长的推动者而不是所有数据库的唯一运营者的新现实。曾经 DBA 的主要日常工作涉及模式设计和查询优化，现在他们负责教导开发人员这些技能，并管理允许开发人员快速安全地部署自己模式更改的系统。

通过这些变化，重点不再是优化 MySQL 以获得几个百分点的速度。我们认为*高性能 MySQL*现在是为人们提供他们需要的信息，以便就如何最好地使用 MySQL 做出明智决策。这始于理解 MySQL 的设计，然后理解 MySQL 擅长和不擅长的地方。¹ 现代版本的 MySQL 提供合理的默认设置，除非您遇到非常具体的扩展问题，否则几乎不需要进行调整。现代团队现在正在处理模式更改、合规问题和分片。我们希望*高性能 MySQL*成为现代公司如何大规模运行 MySQL 的全面指南。

# 本书使用的约定

本书使用以下排版约定：

*斜体*

表示新术语、URL、电子邮件地址、文件名和文件扩展名。

`常量宽度`

用于程序清单，以及段落内引用程序元素，如变量或函数名称、数据库、数据类型、环境变量、语句和关键字。

**`常量宽度粗体`**

显示用户应按照字面意义输入的命令或其他文本。

*`常量宽度斜体`*

显示应替换为用户提供的值或由上下文确定的值的文本。

###### 提示

此图标表示提示或建议。

###### 注意

此图标表示一般说明。

###### 警告

此图标表示警告或注意事项。

# 第四版致谢

## 来自 Silvia

首先，我要感谢我的家人。我的父母为了把我和我的兄弟带到美国，牺牲了在埃及的稳定工作和生活。我的丈夫 Armea，在我接受挑战的过去几年中一直支持我，最终实现了这一成就。

我作为一个移民从中东的大学时代离开，实现了移居美国的梦想。在加利福尼亚州的一所州立大学获得学位后，我在纽约市找到了一份工作，我记得这本书的第二版是我用自己的钱买的第一本不是教科书的技术书籍。我要感谢前几版的作者教给我许多基本的经验，为我在职业生涯中管理数据库做好准备。

我感激我职业生涯中与之合作过的许多人的支持。他们的鼓励让我写下了这本书的这一版，这本书在我职业生涯的早期教会了我很多。我要感谢 Tim Jenkins，SendGrid 的前首席技术官，他雇佣了我这份终身职位，尽管我在面试中告诉他他错误地使用了 MySQL 复制，但他还是信任我，结果证明这是一艘火箭。

我要感谢所有在科技领域的了不起的女性，她们是我的支持网络和啦啦队。特别感谢 Camille Fournier 和 Nicole Forsgren 博士，因为她们写的两本书影响了我过去几年的职业生涯，改变了我对日常工作的看法。

感谢我在 Twilio 团队的同事们。感谢 Sean Kilgore 让我成为一个更优秀的工程师，关心的不仅仅是数据库。感谢 John Martin 是我曾经合作过的最乐观的人。感谢 Laine Campbell 及其 PalominoDB 团队（后来被 Pythian 收购）在我最艰难的岁月中给予的支持和教导，以及 Baron Schwartz 鼓励我写下我的经历。

最后，感谢 Virginia Wilson 是一位出色的编辑，帮助我将我的思绪转化为通顺的句子，并在整个过程中给予我如此多的支持和优雅。

## 来自 Jeremy

当 Silvia 找我帮忙写这本书时，正值大多数人生活中异常紧张的时期——全球大流行，始于 2020 年。我不确定是否想要给自己的生活增加更多压力。我的妻子 Selena 告诉我，如果我不接受，我会后悔的，而我知道不应该和她争论。她一直支持我，鼓励我成为我能成为的最好的人。我将永远爱她，感激她为我所做的一切。

致我的家人、同事和社区朋友们：没有你们，我绝对不可能走到今天这一步。你们教会了我如何成为今天的自己。我的职业生涯是与你们共同经历的总和。你们教会了我如何接受批评，如何以身作则领导，如何失败并重新站起，最重要的是，团队的力量胜过个人的能力。

最后，我要感谢 Silvia，她信任我为这本书带来共同的理解但不同的视角。我希望我达到了你的期望。

## 致技术审阅者

作者还要感谢帮助将这本书推向今天这一地步的技术审阅者们：Aisha Imran、Andrew Regner、Baron Schwartz、Daniel Nichter、Hayley Anderson、Ivan Mora Perez、Jam Leoni、Jaryd Remillard、Jennifer Davis、Jeremy Cole、Keith Wells、Kris Hamoud、Nick Vyzas、Shubheksha Jalan、Tom Krouper 和 Will Gunty。感谢你们的时间和努力。

¹ 众所周知，人们经常将 MySQL 用作队列，然后才发现这样做是错误的。最常见的原因是轮询新队列操作的开销、锁定记录以进行处理的管理，以及随着数据增长而变得笨重的队列表格。
